vars: {
  d2-config: {
    layout-engine: elk
    # Terminal theme code
    theme-id: 300
  }
}

main: {
  label: "main()\nmain.go"
  shape: rectangle
}

initLogger: {
  label: "initLogger()\nCreate logger\n~/.config/ghost/ghost.log"
  shape: rectangle
}

cmdRun: {
  label: "cmd.Run()\ninternal/cmd/main.go"
  shape: rectangle
}

cliCommand: {
  label: "CLI Command Setup\n(urfave/cli/v3)\nName: 'ghost'\nUsage: 'send ghost a prompt'"
  shape: rectangle
}

parseArgs: {
  label: "Parse Arguments\nExtract [prompt]"
  shape: diamond
}

validatePrompt: {
  label: "Validate Prompt\nEmpty?"
  shape: diamond
}

writeOutput: {
  label: "Write Output\nfmt.Fprintln()"
  shape: rectangle
}

errorNoPrompt: {
  label: "Error:\nErrNoPrompt"
  shape: hexagon
  style.fill: "#ff6b6b"
}

errorOutput: {
  label: "Error:\nErrOutput"
  shape: hexagon
  style.fill: "#ff6b6b"
}

success: {
  label: "Success\nReturn nil"
  shape: oval
  style.fill: "#51cf66"
}

main -> initLogger: "1. Initialize"
initLogger -> cmdRun: "2. Pass logger"
cmdRun -> cliCommand: "3. Create"
cliCommand -> parseArgs: "4. Execute"
parseArgs -> validatePrompt: "5. Check"
validatePrompt -> errorNoPrompt: "Yes (empty)"
validatePrompt -> writeOutput: "No (has prompt)"
writeOutput -> errorOutput: "Fail"
writeOutput -> success: "Success"
